/* Fix for Chart Sections on Mobile - Restore Hidden Information */

/* Ensure chart headers are visible on all screen sizes */
@media (max-width: 1200px) {
    /* Keep chart headers visible and properly styled */
    .chart-header {
        display: flex !important;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 20px;
        flex-wrap: wrap;
        gap: 8px;
    }
    
    .chart-header > div {
        flex: 1;
        min-width: 0;
    }
    
    .chart-header h3 {
        font-size: 1rem;
        margin-bottom: 4px;
        display: block !important;
    }
    
    .chart-header p {
        font-size: 0.75rem;
        color: var(--text-muted);
        display: block !important;
        line-height: 1.3;
    }
    
    /* Keep chart value visible */
    .chart-value {
        font-size: 1.25rem;
        font-weight: 700;
        color: var(--primary);
        display: block !important;
        white-space: nowrap;
    }
    
    .chart-value small {
        font-size: 0.75rem;
        font-weight: 400;
        color: var(--text-muted);
        margin-left: 4px;
    }
}

/* Mobile specific adjustments */
@media (max-width: 768px) {
    /* Adjust chart container padding and minimum height */
    .chart-container {
        padding: 16px;
        margin-bottom: 20px;
        min-height: 300px !important;
        height: auto !important;
    }
    
    /* Stack chart header on mobile */
    .chart-header {
        flex-direction: column;
        gap: 12px;
        align-items: stretch;
    }
    
    .chart-header > div {
        width: 100%;
    }
    
    .chart-header h3 {
        font-size: 0.938rem;
        margin-bottom: 2px;
    }
    
    .chart-header p {
        font-size: 0.688rem;
        margin-bottom: 0;
    }
    
    /* Chart value on mobile */
    .chart-value {
        font-size: 1.125rem;
        text-align: left;
        margin-top: 4px;
    }
    
    .chart-value small {
        font-size: 0.688rem;
        display: inline-block;
    }
    
    /* Ensure canvas is visible with proper height */
    #confirmationChart {
        height: 200px !important;
        max-height: 200px !important;
        margin-top: 12px;
        display: block !important;
    }
    
    /* Progress items adjustments */
    .progress-item {
        margin-bottom: 16px;
    }
    
    .progress-header {
        font-size: 0.75rem;
        margin-bottom: 6px;
    }
    
    .progress-label {
        font-weight: 500;
        flex: 1;
        min-width: 0;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    
    .progress-value {
        font-weight: 600;
        white-space: nowrap;
        margin-left: 8px;
    }
    
    /* Progress bar height adjustment */
    .progress-bar {
        height: 10px;
    }
}

/* Very small screens */
@media (max-width: 480px) {
    .chart-container {
        padding: 14px;
        margin-bottom: 16px;
        min-height: 280px !important;
    }
    
    .chart-header h3 {
        font-size: 0.875rem;
    }
    
    .chart-header p {
        font-size: 0.625rem;
        line-height: 1.2;
    }
    
    .chart-value {
        font-size: 1rem;
    }
    
    .chart-value small {
        font-size: 0.625rem;
    }
    
    /* Smaller canvas on very small screens */
    #confirmationChart {
        height: 180px !important;
        max-height: 180px !important;
    }
    
    /* Compact progress items */
    .progress-item {
        margin-bottom: 14px;
    }
    
    .progress-header {
        font-size: 0.688rem;
    }
    
    .progress-value {
        font-size: 0.688rem;
    }
    
    .progress-bar {
        height: 8px;
    }
}

/* Ensure all text content is visible */
.chart-container * {
    visibility: visible !important;
    opacity: 1 !important;
}

/* Fix for "Desglose de Pases Activos" section */
#dashboard .stats-grid[style*="minmax(400px"] {
    margin-bottom: 4px !important;
}

/* Ensure progress percentages are always visible */
.progress-value.text-primary,
.progress-value.text-warning,
.progress-value.text-muted {
    display: inline-flex !important;
    align-items: center;
    gap: 4px;
}

/* Fix grid layout for chart sections on tablets */
@media (min-width: 769px) and (max-width: 1024px) {
    .stats-grid[style*="minmax(400px"] {
        grid-template-columns: 1fr !important;
        gap: 20px;
    }
    
    .chart-container {
        width: 100%;
    }
}

/* Ensure chart sections stack properly on mobile */
@media (max-width: 768px) {
    .stats-grid[style*="minmax(400px"] {
        grid-template-columns: 1fr !important;
        gap: 16px;
    }
    
    .chart-container {
        width: 100%;
    }
}

/* Fix for specific chart container content */
.chart-container .progress-item:last-child {
    margin-bottom: 0;
}

/* Ensure all chart data is visible */
.chart-container canvas {
    display: block !important;
    width: 100% !important;
}

/* Force minimum heights for chart containers - Harmonious proportions */
@media (max-width: 768px) {
    /* Both containers with similar heights for visual harmony */
    .chart-container {
        min-height: 320px !important;
        margin-bottom: 24px !important;
    }
    
    /* Confirmation chart container */
    .chart-container:has(#confirmationChart) {
        min-height: 320px !important;
    }
    
    /* Pass distribution container - slightly taller for progress bars */
    .chart-container:has(.progress-item) {
        min-height: 340px !important;
    }
    
    /* Ensure progress section has proper spacing */
    .chart-container > div[style*="padding"] {
        padding: 16px 0 !important;
    }
}

/* Extra height for very small screens - keep proportional */
@media (max-width: 480px) {
    .chart-container {
        min-height: 300px !important;
    }
    
    /* Set confirmation chart to 320px as requested */
    .chart-container:has(#confirmationChart) {
        min-height: 320px !important;
    }
    
    .chart-container:has(.progress-item) {
        min-height: 320px !important;
    }
}

/* Ensure the stats grid has proper spacing */
@media (max-width: 768px) {
    .stats-grid[style*="minmax(400px"] {
        margin-bottom: 3px !important;
    }
}

/* Ensure chart containers expand to fit content */
.chart-container {
    display: flex;
    flex-direction: column;
    height: auto !important;
    overflow: visible !important;
}

/* Make sure the content inside expands properly */
.chart-container > * {
    flex-shrink: 0;
}

/* Specific fix for progress container */
.chart-container div[style*="padding: 20px 0"] {
    min-height: 200px !important;
}

/* Ensure progress items have enough space */
@media (max-width: 768px) {
    .progress-item {
        margin-bottom: 20px !important;
    }
    
    .progress-item:last-child {
        margin-bottom: 0 !important;
    }
}

/* Fix overlapping with table - extreme minimal spacing for ALL screen sizes */
/* Apply minimal spacing to all screen sizes */
#dashboard .table-container {
    margin-top: 4px !important;
    position: relative;
    z-index: 1;
}

#dashboard .stats-grid[style*="minmax(400px"] {
    margin-bottom: 4px !important;
    position: relative;
    z-index: 2;
}

#dashboard .chart-container {
    position: relative;
    z-index: 3;
    margin-bottom: 8px !important;
}

/* Mobile specific - even less spacing */
@media (max-width: 768px) {
    #dashboard .table-container {
        margin-top: 3px !important;
    }
    
    #dashboard .stats-grid[style*="minmax(400px"] {
        margin-bottom: 3px !important;
    }
    
    #dashboard .chart-container {
        margin-bottom: 6px !important;
    }
}

/* Extra minimal spacing for very small screens */
@media (max-width: 480px) {
    #dashboard .table-container {
        margin-top: 2px !important;
    }
    
    #dashboard .stats-grid[style*="minmax(400px"] {
        margin-bottom: 2px !important;
    }
}

/* Ensure proper stacking order */
#dashboard .content-section {
    position: relative;
}

/* Clear any floats and ensure proper flow */
#dashboard .stats-grid[style*="minmax(400px"]::after {
    content: "";
    display: table;
    clear: both;
}
